{"version":3,"sources":["config.ts","nmb.ts","utils.js","components/main.js","components/image-viewer.js","App.js","serviceWorker.js","index.js"],"names":["Config","theme","createMuiTheme","palette","primary","main","teal","secondary","red","Nmb","fid","page","axios","get","API_SHOWF","tid","API_THREAD","NMB_HOST","HOST","API_GET_FORUM_LIST","API_SEARCH","CDN_IMG","CDN_THUMB","moment","locale","months","split","monthsShort","weekdays","weekdaysShort","weekdaysMin","longDateFormat","LT","LTS","L","LL","LLL","LLLL","l","ll","lll","llll","meridiemParse","meridiemHour","hour","meridiem","minute","isLower","hm","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","dayOfMonthOrdinalParse","ordinal","number","period","relativeTime","future","past","s","ss","m","mm","h","hh","d","dd","M","MM","y","yy","week","dow","doy","utime","Alert","props","elevation","variant","ListItemLink","ListItem","button","component","ScrollTop","children","window","trigger","useScrollTrigger","target","undefined","disableHysteresis","threshold","Zoom","in","onClick","event","anchor","ownerDocument","document","querySelector","scrollIntoView","behavior","block","role","style","position","bottom","right","Main","utils","toggleDrawer","bind","addOldThreads","saveNowThreads","fetchDone","addChosedOldThreads","state","drawerOpen","isLoading","isImageOpen","threads","imageLoaded","muiChoise","checkedThreads","styles","cardHead","display","width","flexWrap","justifyContent","color","grey","cardHeadCookie","cardHeadTime","marginLeft","cardContentImage","marginRight","cardImage","maxWidth","maxHeight","cardContent","cardText","menuButton","title","flexGrow","oldThreads","JSON","parse","localStorage","getItem","setItem","stringify","this","setState","pre","i","id","tmp","_","cloneDeep","Object","keys","forEach","key","remove","thread","console","log","fetchData","data","now","Date","sort","a","b","getThreadList","then","length","nowThreadsIds","push","preParse","tmpStyles","admin","imgRes","img","alt","src","ext","stopPropagation","history","btoa","className","muiChoiseBox","Checkbox","defaultChecked","onChange","checked","Paper","padding","userid","replyCount","dangerouslySetInnerHTML","__html","content","progress","LinearProgress","indexOf","createThreadCard","empty","severity","reverse","Drawer","open","onClose","List","aria-label","href","ListItemIcon","ListItemText","AppBar","Toolbar","IconButton","edge","Typography","location","reload","Container","Accordion","AccordionSummary","expandIcon","aria-controls","heading","Button","onFocus","AccordionDetails","Fab","size","React","Component","ImageViewer","routeParams","url","atob","match","params","_url","pop","viewer","height","go","margin","onLoad","Viewer","querySelectorAll","inline","viewed","zoomTo","App","Boolean","hostname","Array","prototype","val","index","splice","ReactDOM","render","ThemeProvider","path","from","to","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.78e5b1e4.chunk.js","sourcesContent":["import React from 'react'\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport { teal, red } from '@material-ui/core/colors';\r\n\r\nexport class Config {\r\n  public static theme = createMuiTheme({\r\n    palette: {\r\n      primary: {\r\n        main: teal[500],\r\n      },\r\n      secondary: {\r\n        main: red[500],\r\n      },\r\n    },\r\n  })\r\n}","//NMB_HOST = '/adnmb';\r\n// const NMB_HOST = 'https://cors-anywhere.herokuapp.com/https://adnmb2.com/Api';\r\n// import jQuery from \"jquery\"\r\n// import $ from 'jquery'\r\nimport axios from \"axios\"\r\n\r\nexport default class Nmb {\r\n    static NMB_HOST: string = 'http://www.chiro.work:2333/https://adnmb.com/Api';\r\n    static HOST: string = Nmb.NMB_HOST\r\n    static API_GET_FORUM_LIST: string = Nmb.NMB_HOST + '/getForumList/'\r\n    static API_THREAD: string = Nmb.NMB_HOST + '/thread/'\r\n    static API_SHOWF: string = Nmb.NMB_HOST + '/showf/'\r\n    static API_SEARCH: string = Nmb.NMB_HOST + '/Search/'\r\n    static CDN_IMG: string = 'https://nmbimg.fastmirror.org/image/'\r\n    static CDN_THUMB: string = 'https://nmbimg.fastmirror.org/thumb/'\r\n\r\n    static getThreadList(fid: number, page: number = 1) {\r\n        // return fetch(Nmb.API_SHOWF + '?id=' + fid + '&page=' + page, {\r\n        //     method: \"GET\"\r\n        // });\r\n        // return $.ajax({\r\n        //     url: Nmb.API_SHOWF + '?id=' + fid + '&page=' + page,\r\n        //     dataType: 'JSON'\r\n        // });\r\n        return axios.get(Nmb.API_SHOWF + '?id=' + fid + '&page=' + page)\r\n    }\r\n\r\n    static getTheard(tid: number, page: number = 1) {\r\n        // return fetch(Nmb.API_THREAD + '?id=' + tid + '&page=' + page, {\r\n        //     method: \"GET\"\r\n        // });\r\n        // return $.ajax({\r\n        //     url: Nmb.API_THREAD + '?id=' + tid + '&page=' + page,\r\n        //     dataType: 'JSON'\r\n        // });\r\n        return axios.get(Nmb.API_THREAD + '?id=' + tid + '&page=' + page)\r\n    }\r\n}\r\n\r\n\r\n// forums = []\r\n\r\n// // 在main.html才有效果\r\n// function nmbSetForumList(data) {\r\n//     //    console.log(data);\r\n//     forums = []\r\n//     data.sort((a, b) => {\r\n//         return a.sort > b.sort;\r\n//     });\r\n//     for (p of data) {\r\n//         p.forums.sort((a, b) => {\r\n//             return a.sort > b.sort;\r\n//         });\r\n//         forums = forums.concat(p.forums);\r\n//     }\r\n//     //    console.log(forums);\r\n//     forum_list.empty();\r\n//     forum_dom_t = $('<li class=\"mdui-list-item mdui-ripple\"><div class=\"mdui-list-item-content nmb-forum-content\"></div></li>');\r\n//     for (var i in forums) {\r\n//         var forum = forums[i];\r\n//         var forum_dom = $(forum_dom_t).clone(false, true);\r\n//         var target = forum.showName;\r\n//         if (!target)\r\n//             target = forum.name;\r\n//         $('.nmb-forum-content', forum_dom).html(target);\r\n//         $('.nmb-forum-content', forum_dom).attr('forum', JSON.stringify(forum));\r\n//         $('.nmb-forum-content', forum_dom).click(function () {\r\n//             console.log('click forum:', $(this));\r\n//             var mforum = JSON.parse($(this).attr('forum'));\r\n//             window.frames[0].fid = mforum.id;\r\n//             window.frames[0].page_now = 1;\r\n//             window.frames[0].thread_list.empty();\r\n//             nmbGetThreadList(mforum.id).then(d => {\r\n//                 $('.nmb-tag-' + window.frames[0].name).contents().find('.nmb-subtitle').text(mforum.name);\r\n//                 nmbSetThreadList(d);\r\n//             });\r\n//         });\r\n//         forum_list.append(forum_dom);\r\n//     }\r\n// }\r\n\r\n// function nmbGetForumList() {\r\n//     return $.ajax({\r\n//         url: SETTINGS.API_GET_FORUM_LIST,\r\n//         dataType: 'JSON'\r\n//     });\r\n// }\r\n\r\n// function nmbSetThreadList(data) {\r\n//     // mainActivity在stack的最下面\r\n//     var iframe = iframe_stack.data[0];\r\n//     window.frames[0].threadListLoad(data);\r\n// }\r\n\r\n// function nmbGetThreadList(fid, page = 1) {\r\n//     return $.ajax({\r\n//         url: SETTINGS.API_SHOWF + '?id=' + fid + '&page=' + page,\r\n//         dataType: 'JSON'\r\n//     });\r\n// }\r\n\r\n// function nmbGetTheard(tid, page = 1) {\r\n//     return $.ajax({\r\n//         url: SETTINGS.API_THREAD + '?id=' + tid + '&page=' + page,\r\n//         dataType: 'JSON'\r\n//     });\r\n// }","import moment from \"moment\"\r\n\r\nexport default {\r\n\tshowTimeInit: function () {\r\n\t\tmoment.locale('zh-cn', {\r\n\t\t\tmonths: '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),\r\n\t\t\tmonthsShort: '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),\r\n\t\t\tweekdays: '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),\r\n\t\t\tweekdaysShort: '周日_周一_周二_周三_周四_周五_周六'.split('_'),\r\n\t\t\tweekdaysMin: '日_一_二_三_四_五_六'.split('_'),\r\n\t\t\tlongDateFormat: {\r\n\t\t\t\tLT: 'HH:mm',\r\n\t\t\t\tLTS: 'HH:mm:ss',\r\n\t\t\t\tL: 'YYYY-MM-DD',\r\n\t\t\t\tLL: 'YYYY年MM月DD日',\r\n\t\t\t\tLLL: 'YYYY年MM月DD日Ah点mm分',\r\n\t\t\t\tLLLL: 'YYYY年MM月DD日ddddAh点mm分',\r\n\t\t\t\tl: 'YYYY-M-D',\r\n\t\t\t\tll: 'YYYY年M月D日',\r\n\t\t\t\tlll: 'YYYY年M月D日 HH:mm',\r\n\t\t\t\tllll: 'YYYY年M月D日dddd HH:mm'\r\n\t\t\t},\r\n\t\t\tmeridiemParse: /凌晨|早上|上午|中午|下午|晚上/,\r\n\t\t\tmeridiemHour: function (hour, meridiem) {\r\n\t\t\t\tif (hour === 12) {\r\n\t\t\t\t\thour = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (meridiem === '凌晨' || meridiem === '早上' ||\r\n\t\t\t\t\tmeridiem === '上午') {\r\n\t\t\t\t\treturn hour;\r\n\t\t\t\t} else if (meridiem === '下午' || meridiem === '晚上') {\r\n\t\t\t\t\treturn hour + 12;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// '中午'\r\n\t\t\t\t\treturn hour >= 11 ? hour : hour + 12;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmeridiem: function (hour, minute, isLower) {\r\n\t\t\t\tconst hm = hour * 100 + minute;\r\n\t\t\t\tif (hm < 600) {\r\n\t\t\t\t\treturn '凌晨';\r\n\t\t\t\t} else if (hm < 900) {\r\n\t\t\t\t\treturn '早上';\r\n\t\t\t\t} else if (hm < 1130) {\r\n\t\t\t\t\treturn '上午';\r\n\t\t\t\t} else if (hm < 1230) {\r\n\t\t\t\t\treturn '中午';\r\n\t\t\t\t} else if (hm < 1800) {\r\n\t\t\t\t\treturn '下午';\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn '晚上';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcalendar: {\r\n\t\t\t\tsameDay: '[今天]LT',\r\n\t\t\t\tnextDay: '[明天]LT',\r\n\t\t\t\tnextWeek: '[下]ddddLT',\r\n\t\t\t\tlastDay: '[昨天]LT',\r\n\t\t\t\tlastWeek: '[上]ddddLT',\r\n\t\t\t\tsameElse: 'L'\r\n\t\t\t},\r\n\t\t\tdayOfMonthOrdinalParse: /\\d{1,2}(日|月|周)/,\r\n\t\t\tordinal: function (number, period) {\r\n\t\t\t\tswitch (period) {\r\n\t\t\t\t\tcase 'd':\r\n\t\t\t\t\tcase 'D':\r\n\t\t\t\t\tcase 'DDD':\r\n\t\t\t\t\t\treturn number + '日';\r\n\t\t\t\t\tcase 'M':\r\n\t\t\t\t\t\treturn number + '月';\r\n\t\t\t\t\tcase 'w':\r\n\t\t\t\t\tcase 'W':\r\n\t\t\t\t\t\treturn number + '周';\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn number;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trelativeTime: {\r\n\t\t\t\tfuture: '%s内',\r\n\t\t\t\tpast: '%s前',\r\n\t\t\t\ts: '几秒',\r\n\t\t\t\tss: '%d秒',\r\n\t\t\t\tm: '1分钟',\r\n\t\t\t\tmm: '%d分钟',\r\n\t\t\t\th: '1小时',\r\n\t\t\t\thh: '%d小时',\r\n\t\t\t\td: '1天',\r\n\t\t\t\tdd: '%d天',\r\n\t\t\t\tM: '1个月',\r\n\t\t\t\tMM: '%d个月',\r\n\t\t\t\ty: '1年',\r\n\t\t\t\tyy: '%d年'\r\n\t\t\t},\r\n\t\t\tweek: {\r\n\t\t\t\t// GB/T 7408-1994《数据元和交换格式·信息交换·日期和时间表示法》与ISO 8601:1988等效\r\n\t\t\t\tdow: 1, // Monday is the first day of the week.\r\n\t\t\t\tdoy: 4  // The week that contains Jan 4th is the first week of the year.\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tshowTime: function (utime) {\r\n\t\t// 注意是毫秒数\r\n\t\t// console.log(moment.locale())\r\n\t\tvar result = moment(utime).calendar()\r\n\t\treturn result\r\n\t},\r\n\r\n\tlimitString: function (string) {\r\n\t\tif (string.length > 15)\r\n\t\t\tstring = string.slice(0, 15) + '...'\r\n\t\tstring = string.replace('\\n', '')\r\n\t\treturn string\r\n\t}\r\n}","import React from 'react'\r\n// import { makeStyles, createStyles, withStyles, useTheme } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport DehazeIcon from '@material-ui/icons/Dehaze';\r\nimport Container from '@material-ui/core/Container';\r\nimport Paper from \"@material-ui/core/Paper\"\r\nimport Button from \"@material-ui/core/Button\"\r\nimport Accordion from '@material-ui/core/Accordion';\r\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\r\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport grey from \"@material-ui/core/colors/grey\"\r\nimport red from \"@material-ui/core/colors/red\"\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport AtmIcon from '@material-ui/icons/Atm';\r\nimport GitHubIcon from '@material-ui/icons/GitHub';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport PlaylistAddIcon from '@material-ui/icons/PlaylistAdd';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport useScrollTrigger from '@material-ui/core/useScrollTrigger';\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\r\nimport Zoom from '@material-ui/core/Zoom';\r\n\r\n// import { PhotoSwipe, PhotoSwipeGallery, PhotoSwipeUI_Default } from 'react-photoswipe';\r\nimport _ from \"lodash\"\r\nimport Viewer from 'viewerjs';\r\nimport 'viewerjs/dist/viewer.css';\r\n\r\nimport Nmb from \"../nmb.ts\"\r\nimport utils from \"../utils\"\r\n\r\nfunction Alert(props) {\r\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n}\r\nfunction ListItemLink(props) {\r\n  return <ListItem button component=\"a\" {...props} />;\r\n}\r\n\r\nfunction ScrollTop(props) {\r\n  const { children, window } = props;\r\n  // const classes = useStyles();\r\n  // Note that you normally won't need to set the window ref as useScrollTrigger\r\n  // will default to window.\r\n  // This is only being set here because the demo is in an iframe.\r\n  const trigger = useScrollTrigger({\r\n    target: window ? window() : undefined,\r\n    disableHysteresis: true,\r\n    threshold: 100,\r\n  });\r\n\r\n  const handleClick = (event) => {\r\n    const anchor = (event.target.ownerDocument || document).querySelector('#back-to-top-anchor');\r\n\r\n    if (anchor) {\r\n      anchor.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Zoom in={trigger}>\r\n      <div onClick={handleClick} role=\"presentation\" style={{\r\n        position: 'fixed',\r\n        // bottom: theme.spacing(2),\r\n        // right: theme.spacing(2),\r\n        bottom: '3%',\r\n        right: '3%',\r\n      }}>\r\n        {children}\r\n      </div>\r\n    </Zoom>\r\n  );\r\n}\r\n\r\n\r\n\r\nexport default class Main extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    utils.showTimeInit()\r\n    // 绑定\r\n    this.toggleDrawer = this.toggleDrawer.bind(this)\r\n    this.addOldThreads = this.addOldThreads.bind(this)\r\n    this.saveNowThreads = this.saveNowThreads.bind(this)\r\n    this.fetchDone = this.fetchDone.bind(this)\r\n    this.addChosedOldThreads = this.addChosedOldThreads.bind(this)\r\n    // 速报版id是121\r\n    this.state = {\r\n      drawerOpen: false,\r\n      isLoading: true,\r\n      isImageOpen: false,\r\n      threads: [],\r\n      imageLoaded: {},\r\n      // 多选模式\r\n      muiChoise: false,\r\n      // checkedThreads: {},\r\n    }\r\n    this.checkedThreads = {}\r\n    this.styles = {\r\n      cardHead: {\r\n        display: \"flex\",\r\n        width: \"100%\",\r\n        flexWrap: \"nowrap\",\r\n        justifyContent: \"space-between\",\r\n        color: grey[600]\r\n      },\r\n      cardHeadCookie: { display: \"inline-block\" },\r\n      cardHeadTime: { display: \"inline-block\", marginLeft: \"5px\" },\r\n      cardContentImage: { marginRight: \"5px\" },\r\n      cardImage: { maxWidth: '150px', maxHeight: '350px', display: 'inline-block' },\r\n      cardContent: { display: \"flex\" },\r\n      cardText: {},\r\n      menuButton: {\r\n        marginRight: 0,\r\n      },\r\n      title: {\r\n        flexGrow: 1,\r\n      },\r\n    }\r\n    // 获取致闻\r\n    this.oldThreads = JSON.parse(localStorage.getItem('oldThreads'))\r\n    if (this.oldThreads === undefined || this.oldThreads === null) {\r\n      this.oldThreads = {}\r\n      localStorage.setItem('oldThreads', JSON.stringify({}))\r\n    }\r\n    if (!localStorage.getItem('nowThreads')) {\r\n      localStorage.setItem('nowThreads', JSON.stringify([]))\r\n    }\r\n  }\r\n  // this问题的绑定\r\n  toggleDrawer() {\r\n    // console.log('toggleDrawer', this.toggleDrawer)\r\n    this.setState((pre) => {\r\n      return { drawerOpen: !pre.drawerOpen }\r\n    })\r\n  }\r\n\r\n  addOldThreads() {\r\n    for (let i of this.state.threads) {\r\n      this.oldThreads['' + i.id] = i\r\n    }\r\n    localStorage.setItem('oldThreads', JSON.stringify(this.oldThreads))\r\n    // // 刷新\r\n    // window.location.reload();\r\n    // 删除所有的串\r\n    this.setState({\r\n      threads: []\r\n    }, () => {\r\n      // 保存\r\n      localStorage.setItem('nowThreads', JSON.stringify(this.state.threads))\r\n    })\r\n  }\r\n\r\n  addChosedOldThreads() {\r\n    let tmp = _.cloneDeep(this.state.threads)\r\n    Object.keys(this.checkedThreads).forEach((key) => {\r\n      if (this.checkedThreads[key] !== true)\r\n        return\r\n      for (let i of tmp) {\r\n        if (i.id === key) {\r\n          tmp.remove(i)\r\n          this.oldThreads[i.id] = i\r\n          return\r\n        }\r\n      }\r\n    })\r\n    localStorage.setItem('oldThreads', JSON.stringify(this.oldThreads))\r\n    this.setState({\r\n      threads: tmp\r\n    }, () => {\r\n      // 保存\r\n      localStorage.setItem('nowThreads', JSON.stringify(this.state.threads))\r\n    })\r\n  }\r\n\r\n  // 单个标记致闻\r\n  addToOldThreads(thread) {\r\n    this.oldThreads['' + thread.id] = thread\r\n    localStorage.setItem('oldThreads', JSON.stringify(this.oldThreads))\r\n  }\r\n\r\n  // 保存正在浏览的串到本地储存\r\n  saveNowThreads() {\r\n    localStorage.setItem('nowThreads', JSON.stringify(this.state.threads))\r\n  }\r\n\r\n  // 组件第一次渲染完成\r\n  componentDidMount() {\r\n    console.log('componentDidMount')\r\n    console.log(JSON.parse(localStorage.getItem('nowThreads')))\r\n    // 获取上次没看完的串\r\n    this.setState({\r\n      threads: JSON.parse(localStorage.getItem('nowThreads'))\r\n    })\r\n    this.fetchData(1)\r\n  }\r\n\r\n  // 预先处理数据\r\n  preParse(data) {\r\n    // 直接处理字符串\r\n    data.now = Date.parse(data.now)\r\n    return data\r\n  }\r\n\r\n  // 数据获取完成\r\n  fetchDone() {\r\n    this.setState((pre) => {\r\n      let tmp = _.cloneDeep(pre.threads).sort((a, b) => {\r\n        return b.now - a.now\r\n      })\r\n      // console.log('threads', pre.threads)\r\n      // console.log('tmp', tmp)\r\n      return {\r\n        isLoading: false,\r\n        threads: tmp\r\n      }\r\n    }, () => {\r\n      this.saveNowThreads()\r\n    })\r\n  }\r\n\r\n  fetchData(page) {\r\n    Nmb.getThreadList(121, page).then((data) => {\r\n      // console.log(data)\r\n      console.log('fetched page', page, 'got', data.data.length, 'thread(s)')\r\n      this.setState((pre) => {\r\n        let tmp = pre.threads\r\n        // 不考虑已经存在浏览区的串\r\n        let nowThreadsIds = {}\r\n        for (let j of this.state.threads)\r\n          nowThreadsIds[j.id] = true\r\n        for (let i of data.data) {\r\n          // tmp.push(i)\r\n          // 不考虑致闻\r\n          if (this.oldThreads['' + i.id] !== undefined)\r\n            continue\r\n          if (nowThreadsIds['' + i.id])\r\n            continue\r\n          tmp.push(this.preParse(i))\r\n          // console.log(i)\r\n        }\r\n        return {\r\n          threads: tmp\r\n        }\r\n      })\r\n      if (data.data.length === 20)\r\n        this.fetchData(page + 1)\r\n      else {\r\n        // 数据获取完成\r\n        this.fetchDone()\r\n      }\r\n    })\r\n  }\r\n\r\n  createThreadCard(data) {\r\n    // admin: \"0\"\r\n    // content: \"美股开盘大跌<br />↵道琼斯直接熔断\"\r\n    // email: \"\"\r\n    // ext: \".jpg\"\r\n    // id: \"24579900\"\r\n    // img: \"2020-03-12/5e6a397c2ee8a\"\r\n    // name: \"无名氏\"\r\n    // now: \"2020-03-12(四)21:30:36\"\r\n    // remainReplys: 7572\r\n    // replyCount: \"7577\"\r\n    // replys: Array(5)\r\n    // 0: {id: \"29651016\", img: \"\", ext: \"\", now: \"2020-08-21(五)13:02:21\", userid: \"BfDs2WM\", …}\r\n    // 1: {id: \"29651143\", img: \"\", ext: \"\", now: \"2020-08-21(五)13:08:21\", userid: \"Jt6HhHm\", …}\r\n    // 2: {id: \"29651235\", img: \"\", ext: \"\", now: \"2020-08-21(五)13:12:03\", userid: \"3lY4U7o\", …}\r\n    // 3: {id: \"29692176\", img: \"\", ext: \"\", now: \"2020-08-22(六)21:01:25\", userid: \"EGWKZbU\", …}\r\n    // 4: {id: \"29706310\", img: \"\", ext: \"\", now: \"2020-08-23(日)10:25:12\", userid: \"gxIlxgf\", …}\r\n    // length: 5\r\n    // sage: \"0\"\r\n    // status: \"n\"\r\n    // title: \"无标题\"\r\n    // userid: \"L5EZGwy\"\r\n\r\n    // var tmpStyles = this.styles\r\n    let tmpStyles = _.cloneDeep(this.styles)\r\n    if (data.admin !== '0')\r\n      tmpStyles.cardHeadCookie.color = red[600]\r\n    let imgTop = (data.img !== undefined && data.img !== '') ? <img alt=\"\" style={tmpStyles.cardImage}\r\n      src={Nmb.CDN_THUMB + data.img + data.ext}\r\n      onClick={(event) => {\r\n        // 解决点击重叠问题\r\n        event.stopPropagation()\r\n        console.log(\"Image Clicked!\")\r\n        this.props.history.push('/image-viewer/' + window.btoa(Nmb.CDN_IMG + data.img + data.ext))\r\n      }}\r\n      className={'img' + window.btoa(data.img)}\r\n    /> : <div />\r\n    let imgRes = imgTop\r\n\r\n    if (this.checkedThreads[data.id] === undefined)\r\n      this.checkedThreads[data.id] = false\r\n\r\n    let muiChoiseBox = (this.state.muiChoise && !data.maxWidth) ? <Checkbox\r\n      defaultChecked={false}\r\n      // checked={this.checkedThreads[data.id]}\r\n      // checked={checked}\r\n      onClick={(event) => {\r\n        event.stopPropagation()\r\n        // console.log('checkbox', event)\r\n        // this.setState((pre) => {\r\n        //   let tmp = _.cloneDeep(pre.checkedThreads)\r\n        //   tmp['' + data.id] = !tmp['' + data.id]\r\n        //   return {\r\n        //     checkedThreads: tmp\r\n        //   }\r\n        // })\r\n      }}\r\n      onChange={(event) => {\r\n        // console.log(_.cloneDeep(event))\r\n        // console.log(event.target.checked)\r\n        this.checkedThreads[data.id] = event.target.checked\r\n        console.log(this.checkedThreads)\r\n      }}\r\n    // onClick={(event) => {\r\n    //   event.stopPropagation()\r\n    // }}\r\n    /> : undefined\r\n\r\n    return (\r\n      <Paper elevation={3} style={{\r\n        padding: \"10px\",\r\n        width: data.maxWidth ? \"100%\" : undefined\r\n      }}\r\n        onClick={() => {\r\n          console.log(\"Thread Clicked!\")\r\n        }} >\r\n        <div style={tmpStyles.cardHead}>\r\n          <div>\r\n            <div style={tmpStyles.cardHeadCookie}>{data.userid}</div>\r\n            <div style={tmpStyles.cardHeadTime}>{utils.showTime(data.now)}</div>\r\n          </div>\r\n          <div className=\"card-head-count\">{data.replyCount}</div>\r\n          {muiChoiseBox}\r\n        </div>\r\n        <div style={tmpStyles.cardContent}>\r\n          <div style={tmpStyles.cardContentImage}>\r\n            {imgRes}\r\n          </div>\r\n          <div style={tmpStyles.cardText} dangerouslySetInnerHTML={{ __html: data.content }}></div>\r\n        </div>\r\n      </Paper>\r\n    )\r\n  }\r\n\r\n  render() {\r\n\r\n    let threads = []\r\n\r\n    // admin: \"0\"\r\n    // content: \"美股开盘大跌<br />↵道琼斯直接熔断\"\r\n    // email: \"\"\r\n    // ext: \".jpg\"\r\n    // id: \"24579900\"\r\n    // img: \"2020-03-12/5e6a397c2ee8a\"\r\n    // name: \"无名氏\"\r\n    // now: \"2020-03-12(四)21:30:36\"\r\n    // remainReplys: 7572\r\n    // replyCount: \"7577\"\r\n    // replys: Array(5)\r\n    // 0: {id: \"29651016\", img: \"\", ext: \"\", now: \"2020-08-21(五)13:02:21\", userid: \"BfDs2WM\", …}\r\n    // 1: {id: \"29651143\", img: \"\", ext: \"\", now: \"2020-08-21(五)13:08:21\", userid: \"Jt6HhHm\", …}\r\n    // 2: {id: \"29651235\", img: \"\", ext: \"\", now: \"2020-08-21(五)13:12:03\", userid: \"3lY4U7o\", …}\r\n    // 3: {id: \"29692176\", img: \"\", ext: \"\", now: \"2020-08-22(六)21:01:25\", userid: \"EGWKZbU\", …}\r\n    // 4: {id: \"29706310\", img: \"\", ext: \"\", now: \"2020-08-23(日)10:25:12\", userid: \"gxIlxgf\", …}\r\n    // length: 5\r\n    // sage: \"0\"\r\n    // status: \"n\"\r\n    // title: \"无标题\"\r\n    // userid: \"L5EZGwy\"\r\n\r\n    let progress = this.state.isLoading ? <LinearProgress color=\"secondary\" /> : <div />\r\n\r\n    for (let i of this.state.threads) {\r\n      // console.log(i)\r\n      threads.push(<div key={this.state.threads.indexOf(i)}>\r\n        {this.createThreadCard(i)}\r\n        <br />\r\n      </div>)\r\n    }\r\n\r\n    let empty = this.state.threads.length === 0 ? <div><br /><Alert severity=\"info\">你没有未看过的串，你没有致。</Alert></div> : <div />\r\n\r\n    let oldThreads = []\r\n    Object.keys(this.oldThreads).forEach((key) => {\r\n      let tmp = _.cloneDeep(this.oldThreads[key])\r\n      tmp.maxWidth = true\r\n      oldThreads.push(<div key={tmp.now}>\r\n        {this.createThreadCard(tmp)}\r\n        <br />\r\n      </div>)\r\n    })\r\n    oldThreads.reverse()\r\n\r\n    return (\r\n      <div className=\"root-main\" >\r\n        <Drawer open={this.state.drawerOpen} onClose={this.toggleDrawer}>\r\n          <div style={{ width: 240 + 'px' }}>\r\n            <List component=\"nav\" aria-label=\"main mailbox folders\">\r\n              <ListItemLink button href='https://adnmb.com/'>\r\n                <ListItemIcon>\r\n                  <AtmIcon />\r\n                </ListItemIcon>\r\n                <ListItemText primary=\"主站\" />\r\n              </ListItemLink>\r\n              <ListItemLink button href='https://gitee.com/chiro2001/ADNews'>\r\n                <ListItemIcon>\r\n                  <GitHubIcon />\r\n                </ListItemIcon>\r\n                <ListItemText primary=\"关于\" />\r\n              </ListItemLink>\r\n            </List>\r\n          </div>\r\n        </Drawer>\r\n        <AppBar position=\"static\">\r\n          <Toolbar id=\"back-to-top-anchor\">\r\n            <IconButton edge=\"start\" style={this.styles.menuButton} color=\"inherit\" aria-label=\"menu\" onClick={this.toggleDrawer}>\r\n              <DehazeIcon></DehazeIcon>\r\n            </IconButton>\r\n            <Typography variant=\"h6\" style={this.styles.title}>\r\n              速报观察\r\n            </Typography>\r\n            <IconButton edge=\"start\" color=\"inherit\" onClick={() => {\r\n              this.setState((pre) => {\r\n                return {\r\n                  muiChoise: !pre.muiChoise\r\n                }\r\n              })\r\n            }}>\r\n              <PlaylistAddIcon></PlaylistAddIcon>\r\n            </IconButton>\r\n            <IconButton edge=\"start\" color=\"inherit\" onClick={() => {\r\n              // 刷新\r\n              window.location.reload();\r\n            }}>\r\n              <RefreshIcon></RefreshIcon>\r\n            </IconButton>\r\n          </Toolbar>\r\n        </AppBar>\r\n\r\n        {progress}\r\n\r\n        <div className=\"container-main\">\r\n          <Container className=\"thread\">\r\n            {empty}\r\n            <br />\r\n            {threads}\r\n            <Accordion>\r\n              <AccordionSummary\r\n                expandIcon={<ExpandMoreIcon />}\r\n                aria-controls=\"panel1a-content\"\r\n                aria-label=\"Expand\"\r\n                id=\"panel1a-header\"\r\n              >\r\n                <div>\r\n                  <Typography style={this.styles.heading} color='primary'>致闻</Typography>\r\n                  <Button aria-label=\"Acknowledge\" color=\"primary\"\r\n                    onClick={(event) => {\r\n                      event.stopPropagation()\r\n                      this.addOldThreads()\r\n                    }}\r\n                    onFocus={(event) => event.stopPropagation()}>把上面所有串加入致闻</Button>\r\n                  <Button aria-label=\"Acknowledge\" color=\"primary\"\r\n                    onClick={(event) => {\r\n                      event.stopPropagation()\r\n                      this.addChosedOldThreads()\r\n                    }}\r\n                    onFocus={(event) => event.stopPropagation()}\r\n                    style={{ display: this.state.muiChoise ? \"block\" : \"none\" }}>将勾选串加入致闻</Button>\r\n                </div>\r\n              </AccordionSummary>\r\n              <AccordionDetails>\r\n                <Container>\r\n                  {oldThreads}\r\n                </Container>\r\n              </AccordionDetails>\r\n            </Accordion>\r\n          </Container>\r\n        </div>\r\n        <ScrollTop {...this.props}>\r\n          <Fab color=\"secondary\" size=\"small\" aria-label=\"scroll back to top\">\r\n            <KeyboardArrowUpIcon />\r\n          </Fab>\r\n        </ScrollTop>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n","import React from 'react'\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport Container from '@material-ui/core/Container';\r\nimport Paper from \"@material-ui/core/Paper\"\r\nimport Button from \"@material-ui/core/Button\"\r\nimport Accordion from '@material-ui/core/Accordion';\r\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\r\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport grey from \"@material-ui/core/colors/grey\"\r\nimport red from \"@material-ui/core/colors/red\"\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport Viewer from 'viewerjs';\r\nimport 'viewerjs/dist/viewer.css';\r\n\r\nimport Nmb from \"../nmb.ts\"\r\nimport utils from \"../utils\"\r\n\r\n// import Nmb from \"../nmb.ts\"\r\n\r\nexport default class ImageViewer extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    console.log(props)\r\n    console.log(this.props)\r\n    console.log(this.props.routeParams)\r\n    this.url = window.atob(props.match.params._url)\r\n    console.log('url', this.url)\r\n  }\r\n\r\n  goBack() {\r\n    this.props.history.pop()\r\n  }\r\n\r\n  render() {\r\n    let viewer = undefined\r\n    return (\r\n      <div style={{ height: \"100%\" }}>\r\n        <AppBar position=\"static\">\r\n          <Toolbar>\r\n            <IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\" onClick={() => {\r\n              this.props.history.go(-1)\r\n            }}>\r\n              <ArrowBackIcon></ArrowBackIcon>\r\n            </IconButton>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Container>\r\n          <div style={{ height: \"100%\", margin: 'auto' }}>\r\n            <img id=\"image\" alt=\"\" src={this.url}\r\n              onLoad={() => {\r\n                viewer = new Viewer(document.querySelectorAll('#image')[0], {\r\n                  inline: true,\r\n                  viewed() {\r\n                    viewer.zoomTo(1);\r\n                  },\r\n                });\r\n              }} />\r\n          </div>\r\n        </Container>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\n","import React from 'react';\nimport './App.css';\nimport Drawer from '@material-ui/core/Drawer';\n// 这里要用BrowserRouter\nimport { BrowserRouter as Router, Route, Link } from 'react-router-dom'\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport { Button } from \"@material-ui/core\"\n\nimport { Config } from \"./config.ts\"\n\nimport Main from \"./components/main\"\nimport ImageViewer from \"./components/image-viewer\"\n\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    // this.state = {\n    //   drawerOpen: false\n    // }\n    // // 绑定\n    // this.toggleDrawer = this.toggleDrawer.bind(this)\n  }\n  // // this问题的绑定\n  // toggleDrawer() {\n  //   // console.log('toggleDrawer', this.toggleDrawer)\n  //   this.setState((pre) => {\n  //     return { drawerOpen: !pre.drawerOpen }\n  //   })\n  // }\n  render() {\n    return (\n      // <ThemeProvider theme={Config.theme}>\n      //   <Drawer open={this.state.drawerOpen} onClose={this.toggleDrawer}>\n      //     <div style={{ width: 240 + 'px' }}>TEST</div>\n      //   </Drawer>\n      //   <h1>drawerOpen: {'' + this.state.drawerOpen}</h1>\n      //   <Button variant=\"contained\" color=\"primary\" onClick={this.toggleDrawer}>Open Drawer</Button>\n      // </ThemeProvider>\n      <div />\n    );\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import Drawer from '@material-ui/core/Drawer';\n// 这里要用BrowserRouter\nimport { BrowserRouter as Router, Route, Redirect } from 'react-router-dom'\nimport { ThemeProvider } from '@material-ui/core/styles';\n\nimport { Config } from \"./config.ts\"\n\nimport Main from \"./components/main\"\nimport ImageViewer from \"./components/image-viewer\"\nimport * as serviceWorker from './serviceWorker';\n\n// ReactDOM.render(\n//   // <React.StrictMode>\n//     <App />,\n//   // </React.StrictMode>,\n//   document.getElementById('root')\n// );\n\nArray.prototype.remove = function (val) {\n  var index = this.indexOf(val);\n  if (index > -1) {\n    this.splice(index, 1);\n  }\n};\n\nReactDOM.render(\n  <ThemeProvider theme={Config.theme}>\n    <Router>\n      <Route path=\"/\" component={App} />\n      <Route path='/main' component={Main} />\n      <Route path='/image-viewer/:_url' component={ImageViewer} />\n      <Redirect from=\"/\" to=\"/main\" />\n    </Router>\n  </ThemeProvider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n"],"sourceRoot":""}