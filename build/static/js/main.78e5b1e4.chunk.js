(this["webpackJsonpad-news"]=this["webpackJsonpad-news"]||[]).push([[0],{106:function(e,t,a){e.exports=a(135)},111:function(e,t,a){},112:function(e,t,a){},135:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),l=a.n(o),i=(a(111),a(21)),c=a(16),s=a(36),d=a(35),h=(a(112),a(93)),m=a(168),u=a(57),g=function e(){Object(i.a)(this,e)};g.theme=Object(h.a)({palette:{primary:{main:m.a[500]},secondary:{main:u.a[500]}}});var f=a(39),p=a(19),v=a(176),y=a(177),E=a(137),T=a(58),b=a(88),w=a.n(b),O=a(178),_=a(136),k=a(180),S=a(187),D=a(179),C=a(181),H=a(65),j=a.n(H),M=a(63),Y=a.n(M),I=a(64),N=a.n(I),L=a(172),x=a(173),A=a(188),P=a(174),B=a(175),J=a(86),W=a.n(J),F=a(87),R=a.n(F),G=a(90),z=a.n(G),U=a(89),q=a.n(U),V=a(184),$=a(170),K=a(186),Q=a(185),X=a(182),Z=a(91),ee=a.n(Z),te=a(171),ae=a(42),ne=a.n(ae),re=a(62),oe=a.n(re),le=(a(76),a(67)),ie=a.n(le),ce=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"getThreadList",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return ie.a.get(e.API_SHOWF+"?id="+t+"&page="+a)}},{key:"getTheard",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return ie.a.get(e.API_THREAD+"?id="+t+"&page="+a)}}]),e}();ce.NMB_HOST="http://www.chiro.work:2333/https://adnmb.com/Api",ce.HOST=ce.NMB_HOST,ce.API_GET_FORUM_LIST=ce.NMB_HOST+"/getForumList/",ce.API_THREAD=ce.NMB_HOST+"/thread/",ce.API_SHOWF=ce.NMB_HOST+"/showf/",ce.API_SEARCH=ce.NMB_HOST+"/Search/",ce.CDN_IMG="https://nmbimg.fastmirror.org/image/",ce.CDN_THUMB="https://nmbimg.fastmirror.org/thumb/";var se=a(68),de=a.n(se),he=function(){de.a.locale("zh-cn",{months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY\u5e74MM\u6708DD\u65e5",LLL:"YYYY\u5e74MM\u6708DD\u65e5Ah\u70b9mm\u5206",LLLL:"YYYY\u5e74MM\u6708DD\u65e5ddddAh\u70b9mm\u5206",l:"YYYY-M-D",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(e,t){return 12===e&&(e=0),"\u51cc\u6668"===t||"\u65e9\u4e0a"===t||"\u4e0a\u5348"===t?e:"\u4e0b\u5348"===t||"\u665a\u4e0a"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,a){var n=100*e+t;return n<600?"\u51cc\u6668":n<900?"\u65e9\u4e0a":n<1130?"\u4e0a\u5348":n<1230?"\u4e2d\u5348":n<1800?"\u4e0b\u5348":"\u665a\u4e0a"},calendar:{sameDay:"[\u4eca\u5929]LT",nextDay:"[\u660e\u5929]LT",nextWeek:"[\u4e0b]ddddLT",lastDay:"[\u6628\u5929]LT",lastWeek:"[\u4e0a]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u5468)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"\u65e5";case"M":return e+"\u6708";case"w":case"W":return e+"\u5468";default:return e}},relativeTime:{future:"%s\u5185",past:"%s\u524d",s:"\u51e0\u79d2",ss:"%d\u79d2",m:"1\u5206\u949f",mm:"%d\u5206\u949f",h:"1\u5c0f\u65f6",hh:"%d\u5c0f\u65f6",d:"1\u5929",dd:"%d\u5929",M:"1\u4e2a\u6708",MM:"%d\u4e2a\u6708",y:"1\u5e74",yy:"%d\u5e74"},week:{dow:1,doy:4}})},me=function(e){return de()(e).calendar()};function ue(e){return r.a.createElement(K.a,Object.assign({elevation:6,variant:"filled"},e))}function ge(e){return r.a.createElement(A.a,Object.assign({button:!0,component:"a"},e))}function fe(e){var t=e.children,a=e.window,n=Object($.a)({target:a?a():void 0,disableHysteresis:!0,threshold:100});return r.a.createElement(te.a,{in:n},r.a.createElement("div",{onClick:function(e){var t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",style:{position:"fixed",bottom:"3%",right:"3%"}},t))}var pe=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),n=t.call(this,e),he(),n.toggleDrawer=n.toggleDrawer.bind(Object(p.a)(n)),n.addOldThreads=n.addOldThreads.bind(Object(p.a)(n)),n.saveNowThreads=n.saveNowThreads.bind(Object(p.a)(n)),n.fetchDone=n.fetchDone.bind(Object(p.a)(n)),n.addChosedOldThreads=n.addChosedOldThreads.bind(Object(p.a)(n)),n.state={drawerOpen:!1,isLoading:!0,isImageOpen:!1,threads:[],imageLoaded:{},muiChoise:!1},n.checkedThreads={},n.styles={cardHead:{display:"flex",width:"100%",flexWrap:"nowrap",justifyContent:"space-between",color:Y.a[600]},cardHeadCookie:{display:"inline-block"},cardHeadTime:{display:"inline-block",marginLeft:"5px"},cardContentImage:{marginRight:"5px"},cardImage:{maxWidth:"150px",maxHeight:"350px",display:"inline-block"},cardContent:{display:"flex"},cardText:{},menuButton:{marginRight:0},title:{flexGrow:1}},n.oldThreads=JSON.parse(localStorage.getItem("oldThreads")),void 0!==n.oldThreads&&null!==n.oldThreads||(n.oldThreads={},localStorage.setItem("oldThreads",JSON.stringify({}))),localStorage.getItem("nowThreads")||localStorage.setItem("nowThreads",JSON.stringify([])),n}return Object(c.a)(a,[{key:"toggleDrawer",value:function(){this.setState((function(e){return{drawerOpen:!e.drawerOpen}}))}},{key:"addOldThreads",value:function(){var e,t=this,a=Object(f.a)(this.state.threads);try{for(a.s();!(e=a.n()).done;){var n=e.value;this.oldThreads[""+n.id]=n}}catch(r){a.e(r)}finally{a.f()}localStorage.setItem("oldThreads",JSON.stringify(this.oldThreads)),this.setState({threads:[]},(function(){localStorage.setItem("nowThreads",JSON.stringify(t.state.threads))}))}},{key:"addChosedOldThreads",value:function(){var e=this,t=ne.a.cloneDeep(this.state.threads);Object.keys(this.checkedThreads).forEach((function(a){if(!0===e.checkedThreads[a]){var n,r=Object(f.a)(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.id===a)return t.remove(o),void(e.oldThreads[o.id]=o)}}catch(l){r.e(l)}finally{r.f()}}})),localStorage.setItem("oldThreads",JSON.stringify(this.oldThreads)),this.setState({threads:t},(function(){localStorage.setItem("nowThreads",JSON.stringify(e.state.threads))}))}},{key:"addToOldThreads",value:function(e){this.oldThreads[""+e.id]=e,localStorage.setItem("oldThreads",JSON.stringify(this.oldThreads))}},{key:"saveNowThreads",value:function(){localStorage.setItem("nowThreads",JSON.stringify(this.state.threads))}},{key:"componentDidMount",value:function(){console.log("componentDidMount"),console.log(JSON.parse(localStorage.getItem("nowThreads"))),this.setState({threads:JSON.parse(localStorage.getItem("nowThreads"))}),this.fetchData(1)}},{key:"preParse",value:function(e){return e.now=Date.parse(e.now),e}},{key:"fetchDone",value:function(){var e=this;this.setState((function(e){return{isLoading:!1,threads:ne.a.cloneDeep(e.threads).sort((function(e,t){return t.now-e.now}))}}),(function(){e.saveNowThreads()}))}},{key:"fetchData",value:function(e){var t=this;ce.getThreadList(121,e).then((function(a){console.log("fetched page",e,"got",a.data.length,"thread(s)"),t.setState((function(e){var n,r=e.threads,o={},l=Object(f.a)(t.state.threads);try{for(l.s();!(n=l.n()).done;){o[n.value.id]=!0}}catch(d){l.e(d)}finally{l.f()}var i,c=Object(f.a)(a.data);try{for(c.s();!(i=c.n()).done;){var s=i.value;void 0===t.oldThreads[""+s.id]&&(o[""+s.id]||r.push(t.preParse(s)))}}catch(d){c.e(d)}finally{c.f()}return{threads:r}})),20===a.data.length?t.fetchData(e+1):t.fetchDone()}))}},{key:"createThreadCard",value:function(e){var t=this,a=ne.a.cloneDeep(this.styles);"0"!==e.admin&&(a.cardHeadCookie.color=N.a[600]);var n=void 0!==e.img&&""!==e.img?r.a.createElement("img",{alt:"",style:a.cardImage,src:ce.CDN_THUMB+e.img+e.ext,onClick:function(a){a.stopPropagation(),console.log("Image Clicked!"),t.props.history.push("/image-viewer/"+window.btoa(ce.CDN_IMG+e.img+e.ext))},className:"img"+window.btoa(e.img)}):r.a.createElement("div",null);void 0===this.checkedThreads[e.id]&&(this.checkedThreads[e.id]=!1);var o=this.state.muiChoise&&!e.maxWidth?r.a.createElement(Q.a,{defaultChecked:!1,onClick:function(e){e.stopPropagation()},onChange:function(a){t.checkedThreads[e.id]=a.target.checked,console.log(t.checkedThreads)}}):void 0;return r.a.createElement(_.a,{elevation:3,style:{padding:"10px",width:e.maxWidth?"100%":void 0},onClick:function(){console.log("Thread Clicked!")}},r.a.createElement("div",{style:a.cardHead},r.a.createElement("div",null,r.a.createElement("div",{style:a.cardHeadCookie},e.userid),r.a.createElement("div",{style:a.cardHeadTime},me(e.now))),r.a.createElement("div",{className:"card-head-count"},e.replyCount),o),r.a.createElement("div",{style:a.cardContent},r.a.createElement("div",{style:a.cardContentImage},n),r.a.createElement("div",{style:a.cardText,dangerouslySetInnerHTML:{__html:e.content}})))}},{key:"render",value:function(){var e,t=this,a=[],n=this.state.isLoading?r.a.createElement(L.a,{color:"secondary"}):r.a.createElement("div",null),o=Object(f.a)(this.state.threads);try{for(o.s();!(e=o.n()).done;){var l=e.value;a.push(r.a.createElement("div",{key:this.state.threads.indexOf(l)},this.createThreadCard(l),r.a.createElement("br",null)))}}catch(s){o.e(s)}finally{o.f()}var i=0===this.state.threads.length?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(ue,{severity:"info"},"\u4f60\u6ca1\u6709\u672a\u770b\u8fc7\u7684\u4e32\uff0c\u4f60\u6ca1\u6709\u81f4\u3002")):r.a.createElement("div",null),c=[];return Object.keys(this.oldThreads).forEach((function(e){var a=ne.a.cloneDeep(t.oldThreads[e]);a.maxWidth=!0,c.push(r.a.createElement("div",{key:a.now},t.createThreadCard(a),r.a.createElement("br",null)))})),c.reverse(),r.a.createElement("div",{className:"root-main"},r.a.createElement(V.a,{open:this.state.drawerOpen,onClose:this.toggleDrawer},r.a.createElement("div",{style:{width:"240px"}},r.a.createElement(x.a,{component:"nav","aria-label":"main mailbox folders"},r.a.createElement(ge,{button:!0,href:"https://adnmb.com/"},r.a.createElement(P.a,null,r.a.createElement(W.a,null)),r.a.createElement(B.a,{primary:"\u4e3b\u7ad9"})),r.a.createElement(ge,{button:!0,href:"https://gitee.com/chiro2001/ADNews"},r.a.createElement(P.a,null,r.a.createElement(R.a,null)),r.a.createElement(B.a,{primary:"\u5173\u4e8e"}))))),r.a.createElement(v.a,{position:"static"},r.a.createElement(y.a,{id:"back-to-top-anchor"},r.a.createElement(E.a,{edge:"start",style:this.styles.menuButton,color:"inherit","aria-label":"menu",onClick:this.toggleDrawer},r.a.createElement(w.a,null)),r.a.createElement(T.a,{variant:"h6",style:this.styles.title},"\u901f\u62a5\u89c2\u5bdf"),r.a.createElement(E.a,{edge:"start",color:"inherit",onClick:function(){t.setState((function(e){return{muiChoise:!e.muiChoise}}))}},r.a.createElement(q.a,null)),r.a.createElement(E.a,{edge:"start",color:"inherit",onClick:function(){window.location.reload()}},r.a.createElement(z.a,null)))),n,r.a.createElement("div",{className:"container-main"},r.a.createElement(O.a,{className:"thread"},i,r.a.createElement("br",null),a,r.a.createElement(S.a,null,r.a.createElement(D.a,{expandIcon:r.a.createElement(j.a,null),"aria-controls":"panel1a-content","aria-label":"Expand",id:"panel1a-header"},r.a.createElement("div",null,r.a.createElement(T.a,{style:this.styles.heading,color:"primary"},"\u81f4\u95fb"),r.a.createElement(k.a,{"aria-label":"Acknowledge",color:"primary",onClick:function(e){e.stopPropagation(),t.addOldThreads()},onFocus:function(e){return e.stopPropagation()}},"\u628a\u4e0a\u9762\u6240\u6709\u4e32\u52a0\u5165\u81f4\u95fb"),r.a.createElement(k.a,{"aria-label":"Acknowledge",color:"primary",onClick:function(e){e.stopPropagation(),t.addChosedOldThreads()},onFocus:function(e){return e.stopPropagation()},style:{display:this.state.muiChoise?"block":"none"}},"\u5c06\u52fe\u9009\u4e32\u52a0\u5165\u81f4\u95fb"))),r.a.createElement(C.a,null,r.a.createElement(O.a,null,c))))),r.a.createElement(fe,this.props,r.a.createElement(X.a,{color:"secondary",size:"small","aria-label":"scroll back to top"},r.a.createElement(ee.a,null))))}}]),a}(r.a.Component),ve=a(92),ye=a.n(ve),Ee=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),n=t.call(this,e),console.log(e),console.log(n.props),console.log(n.props.routeParams),n.url=window.atob(e.match.params._url),console.log("url",n.url),n}return Object(c.a)(a,[{key:"goBack",value:function(){this.props.history.pop()}},{key:"render",value:function(){var e=this,t=void 0;return r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(v.a,{position:"static"},r.a.createElement(y.a,null,r.a.createElement(E.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(){e.props.history.go(-1)}},r.a.createElement(ye.a,null)))),r.a.createElement(O.a,null,r.a.createElement("div",{style:{height:"100%",margin:"auto"}},r.a.createElement("img",{id:"image",alt:"",src:this.url,onLoad:function(){t=new oe.a(document.querySelectorAll("#image")[0],{inline:!0,viewed:function(){t.zoomTo(1)}})}}))))}}]),a}(r.a.Component),Te=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),a}(r.a.Component),be=a(66),we=a(9),Oe=a(183);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)},l.a.render(r.a.createElement(Oe.a,{theme:g.theme},r.a.createElement(be.a,null,r.a.createElement(we.b,{path:"/",component:Te}),r.a.createElement(we.b,{path:"/main",component:pe}),r.a.createElement(we.b,{path:"/image-viewer/:_url",component:Ee}),r.a.createElement(we.a,{from:"/",to:"/main"}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[106,1,2]]]);
//# sourceMappingURL=main.78e5b1e4.chunk.js.map